{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/determine-android-app-activity-using-adb/",
    "result": {"data":{"site":{"siteMetadata":{"title":"MAUI Automation"}},"markdownRemark":{"id":"7d93d0c1-b9e4-5249-bec9-49bfdfaf87c2","excerpt":"When setup Appium driver options for Android, we need to specify app activity. Something like this: Or if app has a  then we need to wait for the  It is quiteâ€¦","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 585px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/707c67538cf58fa540660403cba3b98d/78a22/AndroidDebugBridgeImage.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.45569620253164%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAACpklEQVQ4y2WTy4tURxTGW1EhY5yxp++tZ99nv6btO3dGpe3Y4/stUWIIiS9QCOOgLnwkRAhKCLiIKLpy6dKd2WbjUkgwkEX+ifwNd1e/cFt7utXFV3XqVJ2P8/iqorVGKcV4H9taT3zlbqyZuvsQ0/7KtNNa+8kDKSVREhMn8cge+3zhr5+1msSMCM374LSRoI1GGTVCaQvp08120O60EUIglSSJIvJeTho3JqTvE6mUi+d7+L5Pu9PCeAY9r9FVjZk3iG2CxU5OL8uoeR7tdsrq5as8uPsra1dukfd2IqWYlByFIUeGB1jqZuT5EvHBhNqeebwjHv4hn+r+7Sx81yXftYxX287R/mEe3XvE04fPePjzY745cwE93cOs3eL+jTv8tHablcGQZC1l6+UZ5q7PMrc6x8z1z2j82KCX5QT7t7H0Q8BXz/tcu3eRm1fvcOzQiQ8J0yji61On+fLoCYbDIYuHl1G7LfU8pN6PsHtDmssdolxz9lXI2X8tt/5LOfciZqnVJ0kj5MdTDsMQz/PoDwbkx3ai9lqCYUR9T0hwPCZYjIlXPG7+3eDS2ybf/7PAud8jGl/UEGW/jVqX3GgoSmt8z2f3oM9Cp4s3W0N7CuUpZFVgZUC8z+fMmworbyvs+qNC62WFzrdV/M8N2pZkH+lQCkEvz0hbzXdTK+Wj38nHmpBgIDj55wbyvzbSe70J9WQLZlhDVc0ow+mSXQkhpOt02y5tJE5K4aw1ztat01q5KA5dshi65Jctzv9ts5t9vtHNnd/qVE07bZRTWrkxT2Ws8FKgZYPTNEJrSRgbkqYliiWdLKDVShBZFX18lpnVTdSyeYwwoyrKb7reQ611MYZSagRjdWHrqggiWYSJLKJUFEEiirAliqApinoqCmMmcdP4Hx5bduRi3naZAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Android Debug Bridge\"\n        title=\"Android Debug Bridge\"\n        src=\"/static/707c67538cf58fa540660403cba3b98d/78a22/AndroidDebugBridgeImage.png\"\n        srcset=\"/static/707c67538cf58fa540660403cba3b98d/c26ae/AndroidDebugBridgeImage.png 158w,\n/static/707c67538cf58fa540660403cba3b98d/6bdcf/AndroidDebugBridgeImage.png 315w,\n/static/707c67538cf58fa540660403cba3b98d/78a22/AndroidDebugBridgeImage.png 585w\"\n        sizes=\"(max-width: 585px) 100vw, 585px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>When setup Appium driver options for Android, we need to specify app activity. Something like this:</p>\n<font size=2>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\">_driverOptions<span class=\"token punctuation\">.</span><span class=\"token function\">AddAdditionalCapability</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"appActivity\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"*.MainActivity\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n</font>\n<p>Or if app has a <code class=\"language-text\">SplashActivity</code> then we need to wait for the <code class=\"language-text\">MainActivity</code></p>\n<font size=2>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\">_driverOptions<span class=\"token punctuation\">.</span><span class=\"token function\">AddAdditionalCapability</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"appWaitActivity\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"*.MainActivity\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n</font>\n<p>It is quite common for app main activity to be <code class=\"language-text\">com.example.app.mainActivity</code>. However, this is not always the case. Sometimes, main activity can be named differently.</p>\n<p>One example of this is apps that built using xamarin, by defaut, if no activity name is specified by developer. The main activity will be appended with a hash to help avoiding namespace conflict. More details can be read <a href=\"https://docs.microsoft.com/en-au/xamarin/android/platform/android-manifest\">here</a>.</p>\n<p>Without the correct activity name specified, Appium will throw this error:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"> Error: Error occured <span class=\"token keyword\">while</span> starting App. Original error: Activity used to start app doesn't exist or cannot be launched<span class=\"token operator\">!</span> Make sure it exists and is a launchable activit</code></pre></div>\n<br/>\n<h2>Determine running activity using <code class=\"language-text\">adb</code></h2>\n<h3>Install adb</h3>\n<p>On Mac</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">brew <span class=\"token function\">install</span> android-platform-tools</code></pre></div>\n<h3>Find activity name using <code class=\"language-text\">adb</code></h3>\n<p>First, determine device id using <code class=\"language-text\">adb devices</code></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">adb devices\n\nOutput:\n\nList of devices attached\ne1418fa6\tdevice</code></pre></div>\n<p>Next, open device shell</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"> adb -s e1418fa6 shell</code></pre></div>\n<p>Launch the app we want to find activity name</p>\n<p>Then run this command</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">dumpsys window windows <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> -E <span class=\"token string\">'mCurrentFocus'</span>    </code></pre></div>\n<p>This will output the name of the current focus activity.</p>\n<p>Example output:\n<font size=2></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">OnePlus3T:/ $ dumpsys window windows <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> -E <span class=\"token string\">'mCurrentFocus'</span> \n  <span class=\"token assign-left variable\">mCurrentFocus</span><span class=\"token operator\">=</span>Window<span class=\"token punctuation\">{</span>844329b u0 com.whatsapp/com.whatsapp.registration.EULA<span class=\"token punctuation\">}</span>\nOnePlus3T:/ $ </code></pre></div>\n</font>","frontmatter":{"title":"Determine android app activity name using adb","date":"September 04, 2021","description":null}},"previous":{"fields":{"slug":"/setup-appium-dotnet/"},"frontmatter":{"title":"Mobile Automation with Appium in .NET - Setup and writing first test"}},"next":{"fields":{"slug":"/appium-desktop-locate-element/"},"frontmatter":{"title":"Locate Android & iOS UI elements using Appium Desktop"}}},"pageContext":{"id":"7d93d0c1-b9e4-5249-bec9-49bfdfaf87c2","previousPostId":"3e95f71f-4bb8-50aa-aa01-a600de8cde87","nextPostId":"c7dd6501-667e-521b-9495-9c16672c08b2"}},
    "staticQueryHashes": ["2841359383","3257411868"]}